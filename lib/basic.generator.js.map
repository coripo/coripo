{"version":3,"sources":["../src/basic.generator.js"],"names":["i18next","require","locales","Generator","dependencies","config","init","lng","locale","fallbackLng","initImmediate","resources","id","name","t","description","inputs","title","fields","label","type","comment","optional","data","items","value","helper","getAdapter","primaryAdapterId","generate","cfg","event","Event","generatorId","note","since","OneDate","till","repeats","sequels","overlap","internal","internalOverlap","external","externalOverlap","exports"],"mappings":"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","file":"basic.generator.js","sourcesContent":["const i18next = require('i18next');\nconst locales = require('../locales/index.js');\n\nconst Generator = function Generator(dependencies, config = {}) {\n  i18next.init({\n    lng: config.locale || 'en',\n    fallbackLng: 'en',\n    initImmediate: false,\n    resources: locales,\n  });\n  const id = 'coripo.coripo.generator.basic';\n  const name = i18next.t('basic-generator.name');\n  const description = i18next.t('basic-generator.description');\n  const inputs = [\n    {\n      title: i18next.t('basic-generator.field-group.basic.title'),\n      fields: [\n        {\n          id: 'title',\n          label: i18next.t('basic-generator.field-group.basic.field.title.label'),\n          type: 'text',\n        },\n        {\n          id: 'note',\n          label: i18next.t('basic-generator.field-group.basic.field.note.label'),\n          type: 'wysiwyg',\n        },\n        {\n          id: 'since',\n          label: i18next.t('basic-generator.field-group.basic.field.since.label'),\n          type: 'date',\n          comment: i18next.t('basic-generator.field-group.basic.field.since.comment'),\n        },\n        {\n          id: 'till',\n          label: i18next.t('basic-generator.field-group.basic.field.till.label'),\n          type: 'date',\n          comment: i18next.t('basic-generator.field-group.basic.field.till.comment'),\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: i18next.t('basic-generator.field-group.repeats.title'),\n      fields: [\n        {\n          id: 'repeats',\n          label: i18next.t('basic-generator.field-group.repeats.field.repeats.label'),\n          type: 'repeats',\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: i18next.t('basic-generator.field-group.sequels.title'),\n      fields: [\n        {\n          id: 'sequels',\n          label: i18next.t('basic-generator.field-group.sequels.field.sequels.label'),\n          type: 'sequels',\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: i18next.t('basic-generator.field-group.overlap-policy.title'),\n      fields: [\n        {\n          id: 'internalOverlap',\n          label: i18next.t('basic-generator.field-group.overlap-policy.field.internal.label'),\n          type: 'select',\n          data: {\n            items: [\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.internal.data.allow'),\n                value: 'allow',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.internal.data.remove'),\n                value: 'remove',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.internal.data.trim'),\n                value: 'trim',\n              },\n            ],\n          },\n          optional: true,\n        },\n        {\n          id: 'externalOverlap',\n          label: i18next.t('basic-generator.field-group.overlap-policy.field.external.label'),\n          type: 'select',\n          data: {\n            items: [\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.external.data.allow'),\n                value: 'allow',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.external.data.remove'),\n                value: 'remove',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.external.data.remove-forever'),\n                value: 'remove-forever',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.external.data.trim'),\n                value: 'trim',\n              },\n              {\n                title: i18next.t('basic-generator.field-group.overlap-policy.field.external.data.trim-forever'),\n                value: 'trim-forever',\n              },\n            ],\n          },\n          optional: true,\n        },\n      ],\n    },\n  ];\n  const helper = {\n    getAdapter: dependencies.getAdapter,\n    primaryAdapterId: dependencies.primaryAdapterId,\n  };\n\n  const generate = (cfg) => {\n    const event = new dependencies.Event({\n      id: cfg.id,\n      generatorId: id,\n      title: cfg.title,\n      note: cfg.note,\n      since: new dependencies.OneDate(cfg.since, helper),\n      till: new dependencies.OneDate((cfg.till || cfg.since), helper),\n      repeats: cfg.repeats,\n      sequels: cfg.sequels,\n      overlap: {\n        internal: cfg.internalOverlap,\n        external: cfg.externalOverlap,\n      },\n    });\n    return event;\n  };\n\n  return {\n    id,\n    name,\n    description,\n    inputs,\n    generate,\n  };\n};\n\nexports.Generator = Generator;\n"]}