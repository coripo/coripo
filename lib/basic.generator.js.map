{"version":3,"sources":["../src/basic.generator.js"],"names":["i18next","require","locales","Generator","dependencies","config","init","lng","locale","fallbackLng","initImmediate","resources","trl","key","store","data","t","id","name","description","inputs","title","fields","label","type","comment","optional","items","value","helper","getAdapter","primaryAdapterId","generate","cfg","event","Event","dna","generatorId","note","since","OneDate","till","categoryId","tags","repeats","sequels","overlap","internal","internalOverlap","external","externalOverlap","exports"],"mappings":"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","file":"basic.generator.js","sourcesContent":["const i18next = require('i18next');\nconst locales = require('../locales/index.js');\n\nconst Generator = function Generator(dependencies, config = {}) {\n  i18next.init({\n    lng: config.locale || 'en',\n    fallbackLng: 'en',\n    initImmediate: false,\n    resources: locales,\n  });\n  const trl = (key) => {\n    i18next.store.data = locales;\n    return i18next.t(key);\n  };\n  const id = 'coripo.coripo.generator.basic';\n  const name = trl('basic-generator.name');\n  const description = trl('basic-generator.description');\n  const inputs = [\n    {\n      title: trl('basic-generator.field-group.basic.title'),\n      fields: [\n        {\n          id: 'title',\n          label: trl('basic-generator.field-group.basic.field.title.label'),\n          type: 'text',\n        },\n        {\n          id: 'note',\n          label: trl('basic-generator.field-group.basic.field.note.label'),\n          type: 'wysiwyg',\n        },\n        {\n          id: 'since',\n          label: trl('basic-generator.field-group.basic.field.since.label'),\n          type: 'date',\n          comment: trl('basic-generator.field-group.basic.field.since.comment'),\n        },\n        {\n          id: 'till',\n          label: trl('basic-generator.field-group.basic.field.till.label'),\n          type: 'date',\n          comment: trl('basic-generator.field-group.basic.field.till.comment'),\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: trl('basic-generator.field-group.repeats.title'),\n      fields: [\n        {\n          id: 'repeats',\n          label: trl('basic-generator.field-group.repeats.field.repeats.label'),\n          type: 'repeats',\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: trl('basic-generator.field-group.sequels.title'),\n      fields: [\n        {\n          id: 'sequels',\n          label: trl('basic-generator.field-group.sequels.field.sequels.label'),\n          type: 'sequels',\n          optional: true,\n        },\n      ],\n    },\n    {\n      title: trl('basic-generator.field-group.overlap-policy.title'),\n      fields: [\n        {\n          id: 'internalOverlap',\n          label: trl('basic-generator.field-group.overlap-policy.field.internal.label'),\n          type: 'select',\n          data: {\n            items: [\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.internal.data.allow'),\n                value: 'allow',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.internal.data.remove'),\n                value: 'remove',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.internal.data.trim'),\n                value: 'trim',\n              },\n            ],\n          },\n          optional: true,\n        },\n        {\n          id: 'externalOverlap',\n          label: trl('basic-generator.field-group.overlap-policy.field.external.label'),\n          type: 'select',\n          data: {\n            items: [\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.external.data.allow'),\n                value: 'allow',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.external.data.remove'),\n                value: 'remove',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.external.data.remove-forever'),\n                value: 'remove-forever',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.external.data.trim'),\n                value: 'trim',\n              },\n              {\n                title: trl('basic-generator.field-group.overlap-policy.field.external.data.trim-forever'),\n                value: 'trim-forever',\n              },\n            ],\n          },\n          optional: true,\n        },\n      ],\n    },\n  ];\n  const helper = {\n    getAdapter: dependencies.getAdapter,\n    primaryAdapterId: dependencies.primaryAdapterId,\n  };\n\n  const generate = (cfg) => {\n    const event = new dependencies.Event({\n      dna: cfg,\n      id: cfg.id,\n      generatorId: id,\n      title: cfg.title,\n      note: cfg.note,\n      since: new dependencies.OneDate(cfg.since, helper),\n      till: new dependencies.OneDate((cfg.till || cfg.since), helper),\n      categoryId: cfg.categoryId,\n      tags: cfg.tags,\n      repeats: cfg.repeats,\n      sequels: cfg.sequels,\n      overlap: {\n        internal: cfg.internalOverlap,\n        external: cfg.externalOverlap,\n      },\n    });\n    return event;\n  };\n\n  return {\n    id,\n    name,\n    description,\n    inputs,\n    generate,\n  };\n};\n\nexports.Generator = Generator;\n"]}